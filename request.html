<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Request Help - HopeLine</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Request Help</h1>
    </header>

    <nav>
        <a href="index.html">Home</a>
        <a href="donate.html">Donate</a>
        <a href="request.html">Request Help</a>
    </nav>

    <main>
        <section>
            <h2>Submit a Donation Request</h2>
            <form id="requestForm">
                <label for="name">Name:</label>
                <input type="text" id="name" required><br>

                <label for="item">Item Needed:</label>
                <input type="text" id="item" required><br>

                <label for="location">Location:</label>
                <input type="text" id="location" required><br>

                <button type="submit">Submit Request</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 HopeLine - For Every Need, There's a Helping Hand</p>
    </footer>

    <script type="module">
      import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-firestore.js";
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-app.js";
      
      const firebaseConfig = {
        apiKey: "AIzaSyDnFpHmsIQPczb3dO8fMmoE7Doz8IsopvE",
        authDomain: "hope-line-4c207.firebaseapp.com",
        projectId: "hope-line-4c207",
        storageBucket: "hope-line-4c207.appspot.com",
        messagingSenderId: "459565190820",
        appId: "1:459565190820:web:10b561e8da4a5761d0a031",
        measurementId: "G-B9MNC3X4B5"
      };

      const app = initializeApp(firebaseConfig);
      const db = getFirestore(app);

      const requestForm = document.getElementById("requestForm");

      requestForm.addEventListener("submit", async (event) => {
        event.preventDefault(); 

        const name = document.getElementById("name").value;
        const item = document.getElementById("item").value;
        const location = document.getElementById("location").value;

        try {
          const docRef = await addDoc(collection(db, "requests"), {
            name: name,
            item: item,
            location: location,
            timestamp: new Date(),
          });
          
          alert("Request submitted successfully!");
          requestForm.reset(); 
        } catch (e) {
          console.error("Error adding document: ", e);
          alert("Failed to submit request. Please try again.");
        }
      });
    </script>
</body>
</html>
